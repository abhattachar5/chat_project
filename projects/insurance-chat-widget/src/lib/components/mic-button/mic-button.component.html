<button
  mat-fab
  [color]="getColor()"
  [class]="'ins-mic-button ins-mic-button--' + state()"
  [class.ins-mic-button--pulse]="shouldPulse()"
  [disabled]="disabled() || state() === 'processing'"
  (mousedown)="onPress()"
  (mouseup)="onRelease()"
  (mouseleave)="onRelease()"
  (touchstart)="onPress()"
  (touchend)="onRelease()"
  [attr.aria-label]="getTooltip()"
  [attr.aria-pressed]="state() === 'listening'"
  [matTooltip]="getTooltip()"
  matTooltipPosition="top">
  
  @if (state() === 'processing') {
    <mat-spinner diameter="24" class="ins-mic-spinner"></mat-spinner>
  } @else {
    <mat-icon>{{ getIcon() }}</mat-icon>
  }
</button>

